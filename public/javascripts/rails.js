(function(d){function b(l){var k=d('meta[name="csrf-token"]').attr("content");if(k){l(function(m){m.setRequestHeader("X-CSRF-Token",k)})}}if(d().jquery=="1.5"){var e=d.ajaxSettings.xhr;d.ajaxSettings.xhr=function(){var k=e();b(function(l){var m=k.open;k.open=function(){m.apply(this,arguments);l(this)}});return k}}else{d(document).ajaxSend(function(k,l){b(function(m){m(l)})})}function c(n,k,m){var l=new d.Event(k);n.trigger(l,m);return l.result!==false}function j(n){var p,l,o,k=n.attr("data-type")||(d.ajaxSettings&&d.ajaxSettings.dataType);if(n.is("form")){p=n.attr("method");l=n.attr("action");o=n.serializeArray();var m=n.data("ujs:submit-button");if(m){o.push(m);n.data("ujs:submit-button",null)}}else{p=n.attr("data-method");l=n.attr("href");o=null}d.ajax({url:l,type:p||"GET",data:o,dataType:k,beforeSend:function(r,q){if(q.dataType===undefined){r.setRequestHeader("accept","*/*;q=0.5, "+q.accepts.script)}return c(n,"ajax:beforeSend",[r,q])},success:function(r,q,s){n.trigger("ajax:success",[r,q,s])},complete:function(r,q){n.trigger("ajax:complete",[r,q])},error:function(s,q,r){n.trigger("ajax:error",[s,q,r])}})}function g(o){var l=o.attr("href"),q=o.attr("data-method"),m=d("meta[name=csrf-token]").attr("content"),p=d("meta[name=csrf-param]").attr("content"),n=d('<form method="post" action="'+l+'"></form>'),k='<input name="_method" value="'+q+'" type="hidden" />';if(p!==undefined&&m!==undefined){k+='<input name="'+p+'" value="'+m+'" type="hidden" />'}n.hide().append(k).appendTo("body");n.submit()}function h(k){k.find("input[data-disable-with]").each(function(){var l=d(this);l.data("ujs:enable-with",l.val()).val(l.attr("data-disable-with")).attr("disabled","disabled")})}function a(k){k.find("input[data-disable-with]").each(function(){var l=d(this);l.val(l.data("ujs:enable-with")).removeAttr("disabled")})}function i(k){var l=k.attr("data-confirm");return !l||(c(k,"confirm")&&confirm(l))}function f(l){var k=false;l.find("input[name][required]").each(function(){if(!d(this).val()){k=true}});return k}d("a[data-confirm], a[data-method], a[data-remote]").live("click.rails",function(l){var k=d(this);if(!i(k)){return false}if(k.attr("data-remote")!=undefined){j(k);return false}else{if(k.attr("data-method")){g(k);return false}}});d("form").live("submit.rails",function(m){var k=d(this),l=k.attr("data-remote")!=undefined;if(!i(k)){return false}if(f(k)){return !l}if(l){j(k);return false}else{setTimeout(function(){h(k)},13)}});d("form input[type=submit], form button[type=submit], form button:not([type])").live("click.rails",function(){var l=d(this);if(!i(l)){return false}var k=l.attr("name"),m=k?{name:k,value:l.val()}:null;l.closest("form").data("ujs:submit-button",m)});d("form").live("ajax:beforeSend.rails",function(k){if(this==k.target){h(d(this))}});d("form").live("ajax:complete.rails",function(k){if(this==k.target){a(d(this))}})})(jQuery);
